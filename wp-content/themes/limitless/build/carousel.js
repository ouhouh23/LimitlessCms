(()=>{"use strict";const t=window.wp.element,e=window.wp.blockEditor,l=window.wp.blocks,s=window.React;class o{constructor(t){this.block=t}initCarousel(t,e,l,s=null){this.leftButton=this.block.querySelector(".carousel__button_left"),this.rightButton=this.block.querySelector(".carousel__button_right"),this.blockGallery=this.block.querySelector(".carousel__gallery"),this.stepMax=null!=s?s:this.blockGallery.querySelectorAll(".carousel__image").length,this.stepMin=1,this.imageWidth=l,this.step=~~window.getComputedStyle(this.blockGallery).getPropertyValue(t),this.blockInversion=~~window.getComputedStyle(this.blockGallery).getPropertyValue(e),this.initEvents()}initEvents(){this.leftButton.addEventListener("click",this.toLeft.bind(this)),this.rightButton.addEventListener("click",this.toRight.bind(this))}toRight(){this.step>=this.stepMax||(this.itemWidth=~~window.getComputedStyle(this.blockGallery).getPropertyValue(this.imageWidth),this.blockInversion=this.blockInversion-this.itemWidth,this.blockGallery.style.transform=`translateX(${this.blockInversion}%)`,this.step+=1)}toLeft(){this.step<=this.stepMin||(this.itemWidth=~~window.getComputedStyle(this.blockGallery).getPropertyValue(this.imageWidth),this.blockInversion=this.blockInversion+this.itemWidth,this.blockGallery.style.transform=`translateX(${this.blockInversion}%)`,this.step-=1)}}const i=window.wp.data;(0,l.registerBlockType)("limitless/carousel",{title:"Carousel",edit:function(l){const[n,r]=(0,s.useState)("");let a=(0,s.useRef)();const{clientId:c}=l,u=(0,i.useSelect)((t=>t("core/block-editor").getBlock(c).innerBlocks));return(0,s.useEffect)((()=>{u.length>0&&r(""!==n?t=>(t.stepMax=u.length,t):t=>{const e=new o(a.current);return e.initCarousel("--image-counter","--carousel-inversion","--carousel-image-width",u.length),e})}),[u.length]),(0,t.createElement)("section",{className:"carousel",ref:a},(0,t.createElement)("div",{className:"carousel__gallery"},(0,t.createElement)(e.InnerBlocks,{allowedBlocks:["limitless/carousel-image"]})),(0,t.createElement)("div",{className:"carousel-group"},(0,t.createElement)("button",{type:"button",className:"button button_square button_small button_primary button_rounded carousel__button carousel__button_left"},(0,t.createElement)("i",{className:" fa-solid fa-arrow-left"})),(0,t.createElement)("button",{type:"button",className:"button button_square button_small button_primary button_rounded carousel__button carousel__button_right"},(0,t.createElement)("i",{className:" fa-solid fa-arrow-right"}))))},save:function(){return(0,t.createElement)(e.InnerBlocks.Content,null)}})})();